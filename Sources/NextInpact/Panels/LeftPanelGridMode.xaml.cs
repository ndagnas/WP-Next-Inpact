//*******************************************************************************************************************************
// DEBUT DU FICHIER
//*******************************************************************************************************************************

//*******************************************************************************************************************************
// Nom           : LeftPanelGridMode.xaml.cs
// Auteur        : Nicolas Dagnas
// Description   : Implémentation de la Page LeftPanelGridMode
// Créé le       : 19/01/2015
// Modifié le    : 04/07/2018
//*******************************************************************************************************************************

//-------------------------------------------------------------------------------------------------------------------------------
#region Using directives
//-------------------------------------------------------------------------------------------------------------------------------
using System;
using System.Net;
using System.Windows;
using System.Windows.Input;
using System.Windows.Controls;
using System.Windows.Threading;
using System.Windows.Phone.Controls;
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
using Microsoft.Phone.Shell;
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
using NextInpact.Controls;
//-------------------------------------------------------------------------------------------------------------------------------
#endregion
//-------------------------------------------------------------------------------------------------------------------------------

//*******************************************************************************************************************************
// Début du bloc "NextInpact.Panels"
//*******************************************************************************************************************************
namespace NextInpact.Panels
	{

	//  #      #####  #####  #####         ####    ###   #   #  #####  #    
	//  #      #      #        #           #   #  #   #  ##  #  #      #    
	//  #      ###    ###      #    #####  ####   #####  # # #  ###    #    
	//  #      #      #        #           #      #   #  #  ##  #      #    
	//  #####  #####  #        #           #      #   #  #   #  #####  #####

	//***************************************************************************************************************************
	// Contrôle LeftPanelGridMode
	//***************************************************************************************************************************
	#region // Déclaration et Implémentation de l'Objet
	//---------------------------------------------------------------------------------------------------------------------------
	/// <summary>
	/// Définit la page permettant l'identification.
	/// </summary>
	//---------------------------------------------------------------------------------------------------------------------------
	public partial class LeftPanelGridMode : UserControl
		{
		//-----------------------------------------------------------------------------------------------------------------------
		// Section des Attributs
		//-----------------------------------------------------------------------------------------------------------------------
		private const string SearchUri = "http://m.nextinpact.com/rechercher?term=";
		//-----------------------------------------------------------------------------------------------------------------------

		//***********************************************************************************************************************
		/// <summary>
		/// Initialise une nouvelle instance de l'objet <b>LeftPanelGridMode</b>.
		/// </summary>
		//-----------------------------------------------------------------------------------------------------------------------
		public LeftPanelGridMode () { this.InitializeComponent (); }
		//***********************************************************************************************************************

		//***********************************************************************************************************************
		/// <summary>
		/// Est appelé lors d'un clic sur un lien interne.
		/// </summary>
		/// <param name="Sender">Objet source de l'appel.</param>
		/// <param name="Args"><b>RoutedEventArgs</b> qui contient les données d'événement.</param>
		//-----------------------------------------------------------------------------------------------------------------------
		private void OnSectionClick ( object Sender, RoutedEventArgs Args )
			{
			//-------------------------------------------------------------------------------------------------------------------
			FrameworkElement Self = Sender as FrameworkElement;

			if ( Self != null && this.Click != null )
				{
				//---------------------------------------------------------------------------------------------------------------
				int Type = Self.Tag.ToString ().ToInteger ();

				this.Click ( this, new ObjectEventArgs<int> ( Type ) );
				//---------------------------------------------------------------------------------------------------------------
				}
			//-------------------------------------------------------------------------------------------------------------------
			}
		//***********************************************************************************************************************
		
		//***********************************************************************************************************************
		/// <summary>
		/// Est appelé lors d'un clic sur un lien interne.
		/// </summary>
		/// <param name="Sender">Objet source de l'appel.</param>
		/// <param name="Args"><b>RoutedEventArgs</b> qui contient les données d'événement.</param>
		//-----------------------------------------------------------------------------------------------------------------------
		private void OnOptionsClick ( object Sender, RoutedEventArgs Args )
			{
			//-------------------------------------------------------------------------------------------------------------------
			FrameworkElement Self = Sender as FrameworkElement;

			if ( Self != null && this.Click != null ) this.Click ( this, EventArgs.Empty );
			//-------------------------------------------------------------------------------------------------------------------
			}
		//***********************************************************************************************************************
		
		//***********************************************************************************************************************
		/// <summary>
		/// Est appelé lors d'un clic sur un lien interne.
		/// </summary>
		/// <param name="Sender">Objet source de l'appel.</param>
		/// <param name="Args"><b>RoutedEventArgs</b> qui contient les données d'événement.</param>
		//-----------------------------------------------------------------------------------------------------------------------
		private void SearchControl_KeyDown ( object sender, KeyEventArgs Args )
			{
			//-------------------------------------------------------------------------------------------------------------------
			if ( this.Click != null && Args.Key == Key.Enter )
				{
				//---------------------------------------------------------------------------------------------------------------
				this.SearchControl.IsEnabled = false;
				this.SearchControl.IsTabStop = false;

				this.Focus();

				this.Dispatcher.Async ( () => 
					{
					//-----------------------------------------------------------------------------------------------------------
					string Value = SearchUri + HttpUtility.UrlEncode ( this.SearchControl.Text );

					this.Click ( this, new ObjectEventArgs<Uri> ( new Uri ( Value ) ) );

					this.SearchControl.Text = string.Empty;

					this.SearchControl.IsEnabled = true;
					this.SearchControl.IsTabStop = true;
					//-----------------------------------------------------------------------------------------------------------
					}, 350 );
				//---------------------------------------------------------------------------------------------------------------
				}
			//-------------------------------------------------------------------------------------------------------------------
			}
		//***********************************************************************************************************************

		//***********************************************************************************************************************
		/// <summary>
		/// Se produit lors d'un clic sur un élément de la page.
		/// </summary>
		//-----------------------------------------------------------------------------------------------------------------------
		public event EventHandler Click;
		//***********************************************************************************************************************
		}
	//---------------------------------------------------------------------------------------------------------------------------
	#endregion
	//***************************************************************************************************************************

	} // Fin du namespace "NextInpact.Panels"
//*******************************************************************************************************************************

//*******************************************************************************************************************************
// FIN DU FICHIER
//*******************************************************************************************************************************
